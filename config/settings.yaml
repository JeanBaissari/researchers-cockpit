# Global Settings for The Researcher's Cockpit
# ==============================================================================
# This file contains all global configuration for the trading research environment.
# Modify these values to change system-wide behavior.

# Capital Configuration
capital:
  default_initial: 100000  # Starting capital for backtests
  currency: USD            # Base currency

# Date Range Defaults
dates:
  default_start: "2023-01-01"  # Default backtest start date (YYYY-MM-DD)
  default_end: "2024-06-01"    # Default backtest end date (YYYY-MM-DD)

# Backtesting Configuration
backtesting:
  data_frequency: daily         # 'daily' or 'minute'
  benchmark: SPY                # Default benchmark symbol

  # Commission Defaults (override in strategy if needed)
  commission:
    equities_per_share: 0.005   # Per share commission
    equities_min_cost: 1.0      # Minimum commission per trade
    crypto_percent: 0.001       # Crypto exchange fee (0.1%)
    forex_per_trade: 0.0        # Forex brokers often have spread instead

  # Slippage Defaults
  slippage:
    volume_limit: 0.025         # Max % of bar volume (2.5%)
    price_impact: 0.1           # Price impact coefficient

# Timeframe Configuration
# ==============================================================================
# Supported timeframes for data ingestion and backtesting.
# Note: Yahoo Finance has data retention limits for intraday data.
timeframes:
  # Available timeframes with data limits (days)
  available:
    1m: 7           # 1-minute data - only 7 days available
    2m: 60          # 2-minute data - 60 days
    5m: 60          # 5-minute data - 60 days
    15m: 60         # 15-minute data - 60 days
    30m: 60         # 30-minute data - 60 days
    1h: 730         # Hourly data - ~2 years
    4h: 60          # 4-hour data - 60 days (aggregated from 1h)
    daily: null     # Daily data - unlimited history
    weekly: null    # Weekly data - unlimited history
    monthly: null   # Monthly data - unlimited history

  # Default timeframes by use case
  defaults:
    research: daily       # For strategy research and validation
    optimization: daily   # For parameter optimization
    live_trading: 1h      # For live trading signals

  # Aggregation rules
  aggregation:
    open: first           # First price in period
    high: max             # Highest price in period
    low: min              # Lowest price in period
    close: last           # Last price in period
    volume: sum           # Total volume in period

# Metrics Configuration
metrics:
  risk_free_rate: 0.04          # Annual risk-free rate for Sharpe/Sortino
  trading_days_per_year: 252    # Used for annualization

# Results Configuration
results:
  auto_symlink: true            # Automatically create 'latest' symlink
  save_plots: true              # Save equity curve plots
  plot_format: png              # 'png', 'svg', or 'pdf'

# Optimization Configuration
optimization:
  default_objective: sharpe     # 'sharpe', 'sortino', 'calmar', 'return'
  default_train_pct: 0.7        # In-sample percentage (70%)
  max_parallel_jobs: 4          # CPU cores for parallel optimization

# Validation Configuration
validation:
  walkforward:
    default_train_period: 252   # Trading days for training
    default_test_period: 63     # Trading days for testing
    min_train_observations: 100 # Minimum data points required
  
  montecarlo:
    default_simulations: 1000   # Number of simulation paths
    confidence_levels: [0.05, 0.50, 0.95]  # Percentiles to report

# Logging Configuration
logging:
  level: INFO                   # DEBUG, INFO, WARNING, ERROR, CRITICAL
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  date_format: "%Y-%m-%d %H:%M:%S"
  
  # File Logging
  file_logging:
    enabled: true
    directory: logs
    max_bytes: 10485760         # 10MB per log file
    backup_count: 5             # Keep 5 backup files

# Report Configuration
reports:
  auto_generate: false          # Auto-generate after backtest/optimization
  format: markdown              # 'markdown' or 'html'
  include_charts: true          # Embed charts in reports

# Data Configuration
data:
  cache:
    enabled: true
    ttl_hours: 24               # Time to live for cached data
    auto_clean: true            # Clean expired cache automatically

  bundles:
    # Bundle naming convention: {source}_{asset_class}_{timeframe}
    # Examples: yahoo_equities_daily, yahoo_crypto_1h, yahoo_forex_5m

    # Default bundles by asset class and timeframe
    equities:
      daily: yahoo_equities_daily
      1h: yahoo_equities_1h
      5m: yahoo_equities_5m
    crypto:
      daily: yahoo_crypto_daily
      1h: yahoo_crypto_1h
      5m: yahoo_crypto_5m
    forex:
      daily: yahoo_forex_daily
      1h: yahoo_forex_1h
      5m: yahoo_forex_5m

    # Legacy defaults (for backward compatibility)
    default_equity: yahoo_equities_daily
    default_crypto: yahoo_crypto_daily
    default_forex: yahoo_forex_daily

# Data Validation Configuration
# ==============================================================================
# Data validation is handled by lib/validation/ package (v1.11.0+).
# Use ValidationConfig.strict(), ValidationConfig.lenient(), or ValidationConfig.custom()
# for programmatic validation configuration.
#
# See: lib/validation/ValidationConfig and docs/api/validation.md
# ==============================================================================
data_validation:
  enabled: true                 # Master switch for validation
  strict_mode: false            # If true, warnings become errors

  checks:
    verify_integrity: true      # Zipline's built-in integrity check
    check_gaps: true            # Check for missing dates
    gap_tolerance_days: 3       # Allow up to 3 consecutive missing days
    check_outliers: true        # Check for price outliers
    outlier_threshold_sigma: 5  # Standard deviations for outlier detection
    check_future_dates: true    # Check for dates in the future
    check_negative_values: true # Check for negative prices/volumes

  # Asset class specific overrides
  per_asset_class:
    crypto:
      gap_tolerance_days: 0     # Crypto trades 24/7, no gaps expected
    forex:
      gap_tolerance_days: 2     # Weekends expected for forex
    equities:
      gap_tolerance_days: 4     # Holidays expected for equities

